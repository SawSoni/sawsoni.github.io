<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Promise Example</title>
	<style>
		#result {
			color : red;
		}
	</style>
	<script src="../js/external/jquery/dist/jquery.js"></script>
	<script>

		// Person model
		class PersonModel{

			constructor(){
				this.firstName = '' ;
				this.lastName = ''; 
			}

			getFullName(){
				return this.firstName + ' '+this.lastName;
			}

			validatefName(){
				
			}
			/**
			save person object in database through API
			API url - http://demo.soni.com:3000/persons
			*/
			save(){
				$.ajax({
					url:'http://demo.soni.com:3000/persons',
					type:'POST',
					data: this
				})
				.then( (data)=> {
					console.log('save succeded '+data);
				})
				.catch( (error)=> {
					console.log('save failed '+error)
				})
			}

		}

		//view
		// short form of $(document).ready(function(){});
		$(function(){
			var person = new PersonModel();

			//update mode on key press
			$('#fName').on('keypress', ()=> {
				person.firstName = $('#fName').val();
			})
			//update mode on key press
			$('#lName').on('keypress', ()=> {
				person.lastName = $('#lName').val();
			})

			//save on submit
			$('#save').on('click', ()=> {
				person.save();
				$('#result').html('Saved successfully');
			})

		})
		
		
		
	</script>
</head>

<body>
	<lable for="fName">First Name:<input type="text" id="fName"></lable>
	<lable for="lName">Last Name: <input type="text" id="lName"></lable>
	<br/>
	<button id='save'>Save</button>
	
	<table>
		<tr>
			<td id='result'></td>
		</tr>
		
	</table>
	
</body>
</html>